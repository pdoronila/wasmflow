//! {{COMPONENT_NAME}} - User-Defined WasmFlow Component
//!
//! {{DESCRIPTION}}
//! Generated by WASM Component Creator

#[allow(warnings)]
mod bindings;

use bindings::exports::wasmflow::node::metadata::Guest as MetadataGuest;
use bindings::exports::wasmflow::node::execution::Guest as ExecutionGuest;
use bindings::wasmflow::node::types::*;
use bindings::wasmflow::node::host;

struct Component;

// Implement the metadata interface
impl MetadataGuest for Component {
    fn get_info() -> ComponentInfo {
        ComponentInfo {
            name: "{{COMPONENT_NAME}}".to_string(),
            version: "0.1.0".to_string(),
            description: "{{DESCRIPTION}}".to_string(),
            author: "User".to_string(),
            category: Some("{{CATEGORY}}".to_string()),
        }
    }

    fn get_inputs() -> Vec<PortSpec> {
        vec![{{INPUTS}}]
    }

    fn get_outputs() -> Vec<PortSpec> {
        vec![{{OUTPUTS}}]
    }

    fn get_capabilities() -> Option<Vec<String>> {
        {{CAPABILITIES}}
    }
}

// Implement the execution interface
impl ExecutionGuest for Component {
    fn execute(inputs: Vec<(String, Value)>) -> Result<Vec<(String, Value)>, ExecutionError> {
        host::log("info", "{{COMPONENT_NAME}} executing");

        {{INPUT_EXTRACTION}}

        // User code begins here
        {{USER_CODE}}
        // User code ends here

        {{OUTPUT_CONSTRUCTION}}
    }
}

bindings::export!(Component with_types_in bindings);
